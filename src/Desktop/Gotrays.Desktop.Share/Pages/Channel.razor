@page "/channel"
@inject IStorageService StorageService

<MVirtualScroll Height=@("calc(100vh - 140px)") OverscanCount=0 ItemHeight=64 Items="_channels">
    <ItemContent>
        <MDivider Style="background-color: var(--app-bar-background-color)">@context.CreatedTime.ToString("yyyy-MM-dd")</MDivider>
        <MListItem Class="channel-message">
            <MListItemAction>
                <MAvatar Size="35">

                    <MMenu OffsetX Right OffsetY Style="padding:5px;">
                        <ActivatorContent Context="menuContext">
                            <div class="text-center border-left-solid" style="width:88px;">
                                <MAvatar @attributes="menuContext.Attrs" Size=40>
                                    <MImage Src="https://cdn.discordapp.com/avatars/924900818090602526/23dcd2c492ffe184cdaf193bb6c899ab.webp?size=128"></MImage>
                                </MAvatar>
                            </div>
                        </ActivatorContent>
                        <ChildContent>

                            <MAvatar Size=60 Style="margin:10px;">
                                <MImage Src="https://cdn.discordapp.com/avatars/924900818090602526/23dcd2c492ffe184cdaf193bb6c899ab.webp?size=128"></MImage>
                            </MAvatar>

                            <MCard Outlined Style="background-color:rgb(17 19 20);margin:10px;color: aliceblue;">
                                <div style="margin:10px;">
                                    <span style="font-size:18px;">Token</span>
                                    <span style="font-size:12px;">简介：</span>
                                    <MDivider Style="border-color: #686b70 !important;margin:2px"></MDivider>
                                    <div>一直在进步的人永远不会差！</div>
                                </div>
                            </MCard>
                        </ChildContent>
                    </MMenu>

                </MAvatar>
            </MListItemAction>

            <MListItemContent>
                <MListItemTitle>
                    <span style="color: cornflowerblue;">Token</span>
                </MListItemTitle>
                <MListItemContent>
                    <MMarkdownIt Source="@context.Message" Class="markdown-parser__basic"  />
                    
                </MListItemContent>
            </MListItemContent>

            <MListItemAction>
            </MListItemAction>

        </MListItem>

    </ItemContent>
</MVirtualScroll>

<MFooter Style="background-color:var(--app-bar-background-color);">
    <MResponsive MaxHeight="100">
        <MTextarea Dense
                   Flat
                   HideDetails="@("true")"
                   OnKeyDown="SendMessage"
                   SoloInverted
         @bind-Value="Message"></MTextarea>
         </MResponsive>
</MFooter>
